// Returns the page count of the passed PDF path. PDFPath should be in the form
//   of a POSIX path. Requires the SmartPill PHP plugin.

Let(
  [
    $PDFPath = PDFPath;

    PHPCode = "
require_once( 'libraries/fpdf.php' );
require_once( 'libraries/fpdi.php' );

$file = fm_evaluate( '$PDFPath' );
$pdf = new FPDI();
$pageCount = $pdf->setSourceFile( fm_evaluate( '$PDFPath' ) );
echo $pdf->setSourceFile( fm_evaluate( '$PDFPath' ) );
"
  ];

  PHP_Execute( PHPCode )
)
